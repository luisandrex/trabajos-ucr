@page "/user_administration/registerUser"

@attribute [HasPermission(AuthorizationPermissions.CanManageUsers)]

@using PRIME_UCR.Application.Implementations.UserAdministration
@using PRIME_UCR.Components.UserAdministration.UserCreation
@using PRIME_UCR.Domain.Constants

<h3>Registrar usuarios en la aplicación</h3>
<hr />
<div class="row">
    <div class="col-sm-2 mb-4">
        <UserAdministrationMenuComponent />
    </div>
    <div class="col-sm-10">
        <p>
            En esta página usted puede hacer el registro de usuarios en la aplicación
        </p>

        <StatusMessage Message="@statusMessage" Class="@messageType" />

        <Loading IsLoading="isBusy">
            <EditForm Model="infoOfUserToRegister" OnValidSubmit="RegisterUserInDB">
                <FluentValidationValidator />

                <RegisterUserFormComponent Value="infoOfUserToRegister" />

                <ProfileSelectionComponent Value=" infoOfUserToRegister" />

                @if (isBusy) // Loading button
                {
        <button class="btn btn-primary width:13em mt-4 mb-4" type="button">
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            Validando información
        </button> }
                            else
                            {
        <button type="submit" class="btn btn-primary mt-4 mb-4 text-center" style="width:13em">Registrar usuario</button>}

            </EditForm>
        </Loading>
    </div>
</div>

